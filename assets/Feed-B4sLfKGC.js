import{P as _,g as p,c as f}from"./Post-DGHquiNL.js";import{_ as v,r as n,c as i,a as o,w as P,v as m,F as h,b as y,o as r,d as g,e as k}from"./index-CJgp8Si2.js";const b={name:"Feed",components:{Post:_},setup(){const a=n(""),s=n("Desc"),l=n([]),t=n(!1),c=n(!1),d=async()=>{t.value=!0;try{const e=await p(s.value);if(!(e!=null&&e.length)){l.value=[];return}l.value=e}catch(e){console.error("[loadPosts]:",e.message)}finally{t.value=!1}};return d(),{content:a,posts:l,loadPosts:d,createPostHandler:async()=>{if(!(!a.value||c.value))try{c.value=!0;const e=await f(a.value);if(!(e!=null&&e.id))return;a.value="",await d()}catch(e){console.error("[createPostHandler]:",e.message)}finally{c.value=!1}}}}},w={class:"feed"},x={class:"feed__header"},F={class:"new-post"},H={class:"feed__publications"},B={key:0,class:"publication-list"},D={key:1,class:"publication-empty"};function C(a,s,l,t,c,d){const u=k("Post");return r(),i("div",w,[o("header",x,[o("div",F,[P(o("textarea",{placeholder:"Write your post here...","onUpdate:modelValue":s[0]||(s[0]=e=>t.content=e)},null,512),[[m,t.content]]),o("button",{onClick:s[1]||(s[1]=(...e)=>t.createPostHandler&&t.createPostHandler(...e))},"Publish")])]),s[2]||(s[2]=o("h1",null,"Feed",-1)),o("main",H,[t.posts.length?(r(),i("div",B,[(r(!0),i(h,null,y(t.posts,e=>(r(),g(u,{key:e.id,post:e,onDelete:t.loadPosts,onUpdate:t.loadPosts},null,8,["post","onDelete","onUpdate"]))),128))])):(r(),i("p",D,"There are no posts here yet"))])])}const T=v(b,[["render",C],["__scopeId","data-v-86097a9d"]]);export{T as default};
